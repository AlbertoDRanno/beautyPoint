<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head.ejs', {title: "Editando producto:" + products.id })%>

<body>
  <%- include('../partials/header.ejs')%>
  <main class="register-main">
    <!--REEMPLAZAR "products" por "product"-->
    <form action="/products/edit/<%= product.id %>?_method=PUT" method="POST" class="form-register"
      enctype="multipart/form-data">
      <h1>Editando producto: <%= product.id %></h1>

      <div class="form-element">
        <label for="product_name">Nombre de producto:</label>
        <input type="text" id="product_name" name="name" value="<%= product.name %>" required />
        <span class="feedback"></span>
      </div>

      <div class="form-element">
        <label for="product_price">Precio:</label>
        <input type="number" name="price" id="product_price" value="<%= product.price %>" required />
        <span class="feedback"></span>
      </div>

      <div class="form-element">
        <label for="product_description">Descripción del producto:</label>
        <textarea name="description" id="product_description" cols="30" rows="10" required>
<%= product.description %></textarea>
        <span class="feedback"></span>
      </div>

      <div class="form-element">
        <label for="product_package">Package:</label>
        <input type="text" id="product_package" name="package" value="<%= product.package %>" required />
        <span class="feedback"></span>
      </div>

      <div class="form-element">
        <label for="image">Imagen Producto:</label>
        <input type="file" id="image" name="image" />
      </div>

      <div class="form-element">
        <label for="product_category">Categoría:</label>

        
        <% for( let i = 0; i < category.length; i++ ) { %>
        //si la categoria que estoy por imprimir es la misma que ya tiene el producto:
        <% if (category[i].id == product.category_id) { %>
        <option value="<%= category[i].id %> " selected>
          <%= category[i].name %>
        </option>
        <% } else { %>
        <option value="<%= category[i].id %> ">
          <%= category[i].name %>
        </option>
        <% } %>
        <% } %> 

        
      </div>

      <div class="form-element">
        <div class="form-botonera">
          <button type="submit" value="updetear" class="form-boton">
            Guardar cambios
          </button>
        </div>
      </div>
    </form>
  </main>
  <%- include('../partials/footer.ejs')%>
</body>


</html>